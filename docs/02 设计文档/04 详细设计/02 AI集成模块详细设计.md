# AI集成模块详细设计

## 文档信息

| 项目 | 内容 |
|------|------|
| 文档版本 | V1.0 |
| 文档状态 | 已完成 |
| 创建日期 | 2026-02-28 |
| 最后更新 | 2026-02-28 |

---

## 1. 模块概述

### 1.1 模块职责

AI集成模块是 RedInk 的核心模块，负责：

- 统一管理多种AI服务的接入
- 实现公网/私域环境的切换与隔离
- 提供内容生成、审核、改写等AI能力
- 处理流式响应和错误重试

### 1.2 模块边界

```
┌─────────────────────────────────────────────────────────────────────┐
│                         AI集成模块边界                               │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  输入                                                                │
│  ├─ 用户输入的文本内容                                              │
│  ├─ 模板信息                                                        │
│  └─ AI配置参数                                                      │
│                                                                     │
│  输出                                                                │
│  ├─ AI生成的文本内容                                                │
│  ├─ 审核结果报告                                                    │
│  └─ 使用统计信息                                                    │
│                                                                     │
│  依赖                                                                │
│  ├─ 环境管理器 (EnvironmentManager)                                 │
│  ├─ 配置服务 (ConfigService)                                        │
│  └─ 网络服务 (NetworkService)                                       │
│                                                                     │
│  被依赖                                                              │
│  ├─ 公文编写模块                                                    │
│  ├─ 审核模块                                                        │
│  └─ 图表生成模块                                                    │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

---

## 2. 类设计

### 2.1 类图

```
┌─────────────────────────────────────────────────────────────────────┐
│                            类图                                      │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌─────────────────────┐                                           │
│  │  AIServiceManager   │◄─────────────────────────────┐            │
│  │  (单例)             │                              │            │
│  ├─────────────────────┤                              │            │
│  │ - envManager        │                              │            │
│  │ - adapters          │                              │            │
│  │ - activeAdapterId   │                              │            │
│  ├─────────────────────┤                              │            │
│  │ + generate()        │                              │            │
│  │ + generateStream()  │                              │            │
│  │ + review()          │                              │ 使用       │
│  │ + switchEnvironment │                              │            │
│  └─────────────────────┘                              │            │
│            │                                          │            │
│            │ 管理                                     │            │
│            ▼                                          │            │
│  ┌─────────────────────┐                              │            │
│  │  <<interface>>      │                              │            │
│  │    IAIAdapter       │                              │            │
│  ├─────────────────────┤                              │            │
│  │ + id                │                              │            │
│  │ + name              │                              │            │
│  │ + environmentType   │                              │            │
│  │ + generate()        │                              │            │
│  │ + generateStream()  │                              │            │
│  │ + review()          │                              │            │
│  │ + testConnection()  │                              │            │
│  └─────────────────────┘                              │            │
│            △                                          │            │
│            │ 实现                                     │            │
│  ┌─────────┼─────────┬─────────────┬─────────────┐   │            │
│  │         │         │             │             │   │            │
│  ▼         ▼         ▼             ▼             ▼   │            │
│ ┌───────┐ ┌───────┐ ┌───────┐ ┌───────┐ ┌───────┐  │            │
│ │OpenAI │ │Claude │ │ Qwen  │ │Wenxin │ │Ollama │  │            │
│ │Adapter│ │Adapter│ │Adapter│ │Adapter│ │Adapter│  │            │
│ └───────┘ └───────┘ └───────┘ └───────┘ └───────┘  │            │
│   公网      公网      公网      公网      私域      │            │
│                                                     │            │
│  ┌─────────────────────┐      ┌─────────────────┐  │            │
│  │EnvironmentManager   │      │  PromptManager  │──┘            │
│  ├─────────────────────┤      ├─────────────────┤               │
│  │ - currentEnv        │      │ - prompts       │               │
│  │ - listeners         │      ├─────────────────┤               │
│  ├─────────────────────┤      │ + getPrompt()   │               │
│  │ + getCurrentEnv()   │      │ + setCustom()   │               │
│  │ + switchEnv()       │      └─────────────────┘               │
│  │ + subscribe()       │                                        │
│  └─────────────────────┘                                        │
│                                                                  │
└──────────────────────────────────────────────────────────────────┘
```

### 2.2 核心类定义

#### AIServiceManager

```typescript
/**
 * AI服务管理器
 * 单例模式，全局唯一
 */
class AIServiceManager {
  private static instance: AIServiceManager;
  
  private envManager: EnvironmentManager;
  private promptManager: PromptManager;
  private adapters: Map<string, IAIAdapter>;
  private activeAdapterId: string | null;
  private sensitiveDetector: SensitiveDetector;
  
  private constructor() {
    this.envManager = new EnvironmentManager();
    this.promptManager = new PromptManager();
    this.adapters = new Map();
    this.activeAdapterId = null;
    this.sensitiveDetector = new SensitiveDetector();
    
    this.initializeAdapters();
    this.setupEnvironmentListener();
  }
  
  static getInstance(): AIServiceManager {
    if (!AIServiceManager.instance) {
      AIServiceManager.instance = new AIServiceManager();
    }
    return AIServiceManager.instance;
  }
  
  // ... 方法实现见下文
}
```

#### BaseAIAdapter

```typescript
/**
 * AI适配器基类
 * 提供通用功能，子类实现具体API调用
 */
abstract class BaseAIAdapter implements IAIAdapter {
  abstract readonly id: string;
  abstract readonly name: string;
  abstract readonly environmentType: 'public' | 'private';
  
  protected config: AdapterConfig;
  protected httpClient: AxiosInstance;
  protected retryConfig: RetryConfig;
  
  constructor(config: AdapterConfig) {
    this.config = config;
    this.retryConfig = {
      maxRetries: 3,
      baseDelay: 1000,
      maxDelay: 10000
    };
    this.httpClient = this.createHttpClient();
  }
  
  protected createHttpClient(): AxiosInstance {
    const client = axios.create({
      baseURL: this.config.baseUrl,
      timeout: this.config.timeout || 60000,
      headers: this.getHeaders()
    });
    
    // 添加请求拦截器
    client.interceptors.request.use(
      this.requestInterceptor.bind(this),
      this.requestErrorHandler.bind(this)
    );
    
    // 添加响应拦截器
    client.interceptors.response.use(
      this.responseInterceptor.bind(this),
      this.responseErrorHandler.bind(this)
    );
    
    return client;
  }
  
  protected abstract getHeaders(): Record<string, string>;
  
  abstract generate(request: GenerateRequest): Promise<GenerateResponse>;
  abstract generateStream(
    request: GenerateRequest,
    onChunk: (chunk: string) => void
  ): Promise<void>;
  
  // 默认审核实现
  async review(request: ReviewRequest): Promise<ReviewResponse> {
    const prompt = this.buildReviewPrompt(request);
    const response = await this.generate({
      systemPrompt: REVIEW_SYSTEM_PROMPT,
      userPrompt: prompt,
      options: { temperature: 0.3 }
    });
    return this.parseReviewResponse(response.content);
  }
  
  async testConnection(): Promise<ConnectionStatus> {
    try {
      await this.generate({
        userPrompt: 'Hi',
        options: { maxTokens: 5 }
      });
      return { connected: true, latency: Date.now() };
    } catch (error) {
      return { 
        connected: false, 
        error: error instanceof Error ? error.message : 'Unknown error'
      };
    }
  }
  
  // ... 辅助方法
}
```

---

## 3. 接口设计

### 3.1 对外接口

```typescript
/**
 * AI服务对外接口
 */
interface IAIService {
  /**
   * 获取当前环境
   */
  getCurrentEnvironment(): Environment;
  
  /**
   * 切换环境
   */
  switchEnvironment(env: 'public' | 'private'): Promise<void>;
  
  /**
   * 获取可用AI列表
   */
  getAvailableAdapters(): AIAdapterInfo[];
  
  /**
   * 设置当前AI
   */
  setActiveAdapter(adapterId: string): void;
  
  /**
   * 生成内容
   */
  generate(request: GenerateRequest): Promise<GenerateResponse>;
  
  /**
   * 流式生成
   */
  generateStream(
    request: GenerateRequest,
    callbacks: StreamCallbacks
  ): Promise<void>;
  
  /**
   * 审核内容
   */
  review(request: ReviewRequest): Promise<ReviewResponse>;
  
  /**
   * 改写内容
   */
  rewrite(request: RewriteRequest): Promise<RewriteResponse>;
}

/**
 * 流式回调
 */
interface StreamCallbacks {
  onChunk: (chunk: string) => void;
  onComplete?: (fullContent: string) => void;
  onError?: (error: Error) => void;
}
```

### 3.2 内部接口

```typescript
/**
 * 适配器配置
 */
interface AdapterConfig {
  apiKey?: string;
  baseUrl: string;
  timeout?: number;
  model?: string;
  defaultOptions?: ModelOptions;
}

/**
 * 生成请求
 */
interface GenerateRequest {
  systemPrompt?: string;
  userPrompt: string;
  context?: Message[];
  options?: ModelOptions;
}

/**
 * 模型选项
 */
interface ModelOptions {
  model?: string;
  temperature?: number;
  maxTokens?: number;
  topP?: number;
  frequencyPenalty?: number;
  presencePenalty?: number;
}

/**
 * 生成响应
 */
interface GenerateResponse {
  content: string;
  usage?: {
    promptTokens: number;
    completionTokens: number;
    totalTokens: number;
  };
  finishReason?: 'stop' | 'length' | 'error';
  model?: string;
}
```

---

## 4. 流程设计

### 4.1 内容生成流程

```
┌─────────────────────────────────────────────────────────────────────┐
│                        内容生成流程                                  │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌─────────┐                                                        │
│  │  开始   │                                                        │
│  └────┬────┘                                                        │
│       ▼                                                             │
│  ┌─────────────────────────────────────────┐                       │
│  │           接收生成请求                   │                       │
│  └────────────────┬────────────────────────┘                       │
│                   ▼                                                 │
│  ┌─────────────────────────────────────────┐                       │
│  │           获取当前环境                   │                       │
│  └────────────────┬────────────────────────┘                       │
│                   ▼                                                 │
│            ┌──────┴──────┐                                         │
│            │ 公网环境?   │                                         │
│            └──────┬──────┘                                         │
│         是 ┌──────┴──────┐ 否                                      │
│            ▼             ▼                                         │
│  ┌─────────────────┐  ┌─────────────────┐                         │
│  │  敏感信息检测   │  │  跳过敏感检测   │                         │
│  └────────┬────────┘  └────────┬────────┘                         │
│           ▼                    │                                    │
│    ┌──────┴──────┐             │                                   │
│    │ 有敏感信息? │             │                                   │
│    └──────┬──────┘             │                                   │
│      是   │   否               │                                   │
│    ┌──────┴──────┐             │                                   │
│    ▼             ▼             │                                   │
│ ┌──────────┐ ┌──────────┐     │                                   │
│ │发送警告  │ │ 继续执行 │◄────┘                                   │
│ │用户确认  │ └────┬─────┘                                         │
│ └────┬─────┘      │                                                │
│      │            ▼                                                 │
│      │   ┌─────────────────────────────────────────┐              │
│      │   │           获取活动适配器                 │              │
│      │   └────────────────┬────────────────────────┘              │
│      │                    ▼                                        │
│      │   ┌─────────────────────────────────────────┐              │
│      │   │           构建完整Prompt                │              │
│      │   │     (系统提示 + 上下文 + 用户输入)      │              │
│      │   └────────────────┬────────────────────────┘              │
│      │                    ▼                                        │
│      │   ┌─────────────────────────────────────────┐              │
│      │   │           调用AI API                    │              │
│      │   │         (支持重试机制)                  │              │
│      │   └────────────────┬────────────────────────┘              │
│      │                    ▼                                        │
│      │            ┌───────┴───────┐                               │
│      │            │   调用成功?   │                               │
│      │            └───────┬───────┘                               │
│      │            是      │      否                               │
│      │            ┌───────┴───────┐                               │
│      │            ▼               ▼                                │
│      │   ┌─────────────┐  ┌─────────────┐                        │
│      │   │ 返回生成结果│  │ 抛出错误    │                        │
│      │   └──────┬──────┘  └──────┬──────┘                        │
│      │          │                │                                 │
│      └──────────┼────────────────┘                                │
│                 ▼                                                  │
│            ┌─────────┐                                             │
│            │  结束   │                                             │
│            └─────────┘                                             │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### 4.2 环境切换流程

```
┌─────────────────────────────────────────────────────────────────────┐
│                        环境切换流程                                  │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│        ┌─────────┐                                                  │
│        │  开始   │                                                  │
│        └────┬────┘                                                  │
│             ▼                                                       │
│  ┌─────────────────────────────────────────┐                       │
│  │     用户点击环境切换按钮                 │                       │
│  └────────────────┬────────────────────────┘                       │
│                   ▼                                                 │
│  ┌─────────────────────────────────────────┐                       │
│  │     获取当前环境和目标环境               │                       │
│  └────────────────┬────────────────────────┘                       │
│                   ▼                                                 │
│         ┌─────────┴─────────┐                                      │
│         │ 私域 → 公网?      │                                      │
│         └─────────┬─────────┘                                      │
│            是     │     否                                         │
│         ┌─────────┴─────────┐                                      │
│         ▼                   ▼                                      │
│  ┌─────────────────┐  ┌─────────────────┐                         │
│  │ 显示安全警告    │  │ 直接切换        │                         │
│  │ 需要用户确认    │  │                 │                         │
│  └────────┬────────┘  └────────┬────────┘                         │
│           ▼                    │                                   │
│    ┌──────┴──────┐             │                                   │
│    │ 用户确认?   │             │                                   │
│    └──────┬──────┘             │                                   │
│      是   │   否               │                                   │
│           │   │                │                                   │
│           │   ▼                │                                   │
│           │ ┌──────────┐      │                                   │
│           │ │ 取消切换 │      │                                   │
│           │ └────┬─────┘      │                                   │
│           │      │            │                                   │
│           ▼      │            ▼                                   │
│  ┌─────────────────────────────────────────┐                      │
│  │        更新环境状态                      │◄─────────────────────│
│  └────────────────┬────────────────────────┘                      │
│                   ▼                                                │
│  ┌─────────────────────────────────────────┐                      │
│  │        重新选择可用适配器                │                      │
│  └────────────────┬────────────────────────┘                      │
│                   ▼                                                │
│  ┌─────────────────────────────────────────┐                      │
│  │        更新UI主题色                      │                      │
│  │      公网蓝(#1890FF)/私域绿(#52C41A)    │                      │
│  └────────────────┬────────────────────────┘                      │
│                   ▼                                                │
│  ┌─────────────────────────────────────────┐                      │
│  │        记录审计日志                      │                      │
│  └────────────────┬────────────────────────┘                      │
│                   ▼                                                │
│              ┌─────────┐                                          │
│              │  结束   │                                          │
│              └─────────┘                                          │
│                                                                    │
└────────────────────────────────────────────────────────────────────┘
```

### 4.3 流式响应处理流程

```
┌─────────────────────────────────────────────────────────────────────┐
│                      流式响应处理流程                                │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  前端                        AI模块                      AI服务     │
│   │                            │                            │      │
│   │  1. 发起流式请求           │                            │      │
│   │ ──────────────────────────>│                            │      │
│   │                            │                            │      │
│   │                            │  2. 建立SSE连接            │      │
│   │                            │ ──────────────────────────>│      │
│   │                            │                            │      │
│   │                            │  3. 返回首个数据块         │      │
│   │                            │ <──────────────────────────│      │
│   │  4. 回调onChunk(chunk1)   │                            │      │
│   │ <──────────────────────────│                            │      │
│   │                            │                            │      │
│   │  5. 更新UI显示             │                            │      │
│   │ ─────────┐                 │                            │      │
│   │ <────────┘                 │                            │      │
│   │                            │                            │      │
│   │                            │  6. 返回后续数据块         │      │
│   │                            │ <──────────────────────────│      │
│   │  7. 回调onChunk(chunk2)   │                            │      │
│   │ <──────────────────────────│                            │      │
│   │                            │                            │      │
│   │        ... 重复 ...        │                            │      │
│   │                            │                            │      │
│   │                            │  8. 流结束 [DONE]          │      │
│   │                            │ <──────────────────────────│      │
│   │                            │                            │      │
│   │  9. 回调onComplete()      │                            │      │
│   │ <──────────────────────────│                            │      │
│   │                            │                            │      │
│   │  10. 显示完成状态          │                            │      │
│   │ ─────────┐                 │                            │      │
│   │ <────────┘                 │                            │      │
│   │                            │                            │      │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

---

## 5. 数据结构设计

### 5.1 请求数据结构

```typescript
/**
 * 公文生成请求
 */
interface DocumentGenerateRequest {
  // 文档类型
  docType: 'notice' | 'report' | 'request' | 'reply' | 'letter' | 'minutes';
  
  // 模板ID（可选）
  templateId?: string;
  
  // 用户输入的要点
  keyPoints: string[];
  
  // 背景信息
  background?: string;
  
  // 接收单位/对象
  recipient?: string;
  
  // 生成选项
  options?: {
    // 内容风格
    style?: 'formal' | 'concise' | 'detailed';
    // 内容长度偏好
    lengthPreference?: 'short' | 'medium' | 'long';
    // 是否需要多版本
    multipleVersions?: boolean;
  };
}

/**
 * 审核请求
 */
interface DocumentReviewRequest {
  // 待审核内容
  content: string;
  
  // 文档类型
  docType?: string;
  
  // 审核类型
  reviewTypes: ('content' | 'format' | 'logic' | 'language' | 'policy')[];
  
  // 自定义审核规则
  customRules?: ReviewRule[];
}

/**
 * 改写请求
 */
interface RewriteRequest {
  // 原始内容
  originalContent: string;
  
  // 改写指令
  instruction: 'polish' | 'simplify' | 'expand' | 'formal' | 'custom';
  
  // 自定义指令（当instruction为custom时）
  customInstruction?: string;
}
```

### 5.2 响应数据结构

```typescript
/**
 * 审核响应
 */
interface DocumentReviewResponse {
  // 是否通过
  passed: boolean;
  
  // 总分（0-100）
  score: number;
  
  // 各项得分
  scores: {
    content?: number;
    format?: number;
    logic?: number;
    language?: number;
    policy?: number;
  };
  
  // 问题列表
  issues: ReviewIssue[];
  
  // 总体评价
  summary: string;
  
  // 修改建议
  suggestions: string[];
}

/**
 * 审核问题
 */
interface ReviewIssue {
  id: string;
  type: 'content' | 'format' | 'logic' | 'language' | 'policy';
  severity: 'high' | 'medium' | 'low';
  description: string;
  position?: TextPosition;
  originalText?: string;
  suggestion: string;
  autoFixable: boolean;
}

/**
 * 文本位置
 */
interface TextPosition {
  start: number;
  end: number;
  paragraph?: number;
}
```

---

## 6. 异常处理设计

### 6.1 异常类型

```typescript
/**
 * AI服务异常基类
 */
class AIServiceError extends Error {
  constructor(
    message: string,
    public readonly code: AIErrorCode,
    public readonly adapterId: string,
    public readonly details?: Record<string, any>
  ) {
    super(message);
    this.name = 'AIServiceError';
  }
}

/**
 * 错误码
 */
enum AIErrorCode {
  // 网络相关
  NETWORK_ERROR = 'NETWORK_ERROR',
  TIMEOUT = 'TIMEOUT',
  
  // 认证相关
  AUTH_ERROR = 'AUTH_ERROR',
  API_KEY_INVALID = 'API_KEY_INVALID',
  
  // 配额相关
  QUOTA_EXCEEDED = 'QUOTA_EXCEEDED',
  RATE_LIMITED = 'RATE_LIMITED',
  
  // 模型相关
  MODEL_UNAVAILABLE = 'MODEL_UNAVAILABLE',
  CONTEXT_TOO_LONG = 'CONTEXT_TOO_LONG',
  
  // 安全相关
  SENSITIVE_CONTENT_BLOCKED = 'SENSITIVE_CONTENT_BLOCKED',
  ENVIRONMENT_MISMATCH = 'ENVIRONMENT_MISMATCH',
  
  // 其他
  UNKNOWN_ERROR = 'UNKNOWN_ERROR'
}
```

### 6.2 异常处理策略

| 异常类型 | 处理策略 | 用户提示 |
|----------|----------|----------|
| NETWORK_ERROR | 自动重试3次 | "网络连接失败，请检查网络" |
| TIMEOUT | 自动重试2次 | "请求超时，请稍后重试" |
| AUTH_ERROR | 不重试，提示配置 | "API密钥无效，请重新配置" |
| QUOTA_EXCEEDED | 不重试 | "API配额已用尽" |
| RATE_LIMITED | 延迟后重试 | "请求过于频繁，请稍候" |
| SENSITIVE_CONTENT_BLOCKED | 不重试 | "内容包含敏感信息，已阻止发送" |

### 6.3 重试机制

```typescript
/**
 * 重试配置
 */
interface RetryConfig {
  maxRetries: number;
  baseDelay: number;
  maxDelay: number;
  retryableErrors: AIErrorCode[];
}

/**
 * 带重试的执行器
 */
async function executeWithRetry<T>(
  fn: () => Promise<T>,
  config: RetryConfig
): Promise<T> {
  let lastError: Error;
  
  for (let attempt = 0; attempt <= config.maxRetries; attempt++) {
    try {
      return await fn();
    } catch (error) {
      lastError = error as Error;
      
      // 检查是否可重试
      if (error instanceof AIServiceError) {
        if (!config.retryableErrors.includes(error.code)) {
          throw error;
        }
      }
      
      // 最后一次尝试失败
      if (attempt === config.maxRetries) {
        throw error;
      }
      
      // 计算延迟（指数退避 + 随机抖动）
      const delay = Math.min(
        config.baseDelay * Math.pow(2, attempt) + Math.random() * 1000,
        config.maxDelay
      );
      
      await sleep(delay);
    }
  }
  
  throw lastError!;
}
```

---

## 7. 配置管理

### 7.1 AI配置结构

```typescript
/**
 * AI服务完整配置
 */
interface AIServiceConfig {
  // 默认环境
  defaultEnvironment: 'public' | 'private';
  
  // 公网AI配置
  publicProviders: {
    openai?: OpenAIConfig;
    claude?: ClaudeConfig;
    qwen?: QwenConfig;
    wenxin?: WenxinConfig;
    spark?: SparkConfig;
  };
  
  // 私域AI配置
  privateProviders: {
    ollama?: OllamaConfig;
    lmstudio?: LMStudioConfig;
    custom?: CustomConfig;
  };
  
  // 默认选择的提供商
  defaultPublicProvider: string;
  defaultPrivateProvider: string;
  
  // 全局选项
  globalOptions: {
    temperature: number;
    maxTokens: number;
    timeout: number;
  };
  
  // 敏感检测
  sensitiveDetection: {
    enabled: boolean;
    customRules: SensitiveRule[];
  };
}
```

### 7.2 配置加载

```typescript
/**
 * 配置管理器
 */
class AIConfigManager {
  private config: AIServiceConfig;
  private keyStore: SecureKeyStore;
  
  constructor() {
    this.keyStore = new SecureKeyStore();
    this.config = this.loadConfig();
  }
  
  /**
   * 获取提供商配置
   */
  getProviderConfig(providerId: string): AdapterConfig | null {
    const allProviders = {
      ...this.config.publicProviders,
      ...this.config.privateProviders
    };
    
    return allProviders[providerId] || null;
  }
  
  /**
   * 获取API密钥（解密）
   */
  async getApiKey(providerId: string): Promise<string | null> {
    return this.keyStore.getApiKey(providerId);
  }
  
  /**
   * 保存API密钥（加密）
   */
  async saveApiKey(providerId: string, apiKey: string): Promise<void> {
    await this.keyStore.storeApiKey(providerId, apiKey);
  }
  
  /**
   * 更新配置
   */
  updateConfig(updates: Partial<AIServiceConfig>): void {
    this.config = { ...this.config, ...updates };
    this.saveConfig();
  }
  
  private loadConfig(): AIServiceConfig {
    // 从本地存储加载...
  }
  
  private saveConfig(): void {
    // 保存到本地存储（不含API密钥）...
  }
}
```

---

## 8. 附录

### 8.1 支持的AI提供商

| 提供商 | 环境 | 模型 | 特点 |
|--------|------|------|------|
| OpenAI | 公网 | GPT-4, GPT-3.5-turbo | 综合能力强 |
| Claude | 公网 | Claude-3-opus/sonnet | 长文本处理好 |
| 通义千问 | 公网 | qwen-turbo/plus/max | 中文优化 |
| 文心一言 | 公网 | ERNIE-Bot | 中文理解好 |
| 讯飞星火 | 公网 | Spark-3.5 | 中文生成流畅 |
| Ollama | 私域 | 多种开源模型 | 本地部署 |

### 8.2 推荐模型配置

| 场景 | 推荐模型 | 温度 | 最大Token |
|------|----------|------|-----------|
| 公文生成 | GPT-4 / qwen-max | 0.7 | 4096 |
| 内容审核 | GPT-4 / Claude-3 | 0.3 | 2048 |
| 内容改写 | GPT-3.5-turbo | 0.5 | 2048 |
| 图表生成 | GPT-4 | 0.5 | 1024 |

---

*文档结束*
