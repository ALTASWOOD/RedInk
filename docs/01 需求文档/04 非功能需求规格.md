# 非功能需求规格说明书

## 文档信息

| 项目 | 内容 |
|------|------|
| 文档版本 | V1.0 |
| 文档状态 | 已完成 |
| 创建日期 | 2026-02-28 |
| 最后更新 | 2026-02-28 |

---

## 目录

1. [性能需求](#1-性能需求)
2. [安全需求](#2-安全需求)
3. [可用性需求](#3-可用性需求)
4. [可靠性需求](#4-可靠性需求)
5. [兼容性需求](#5-兼容性需求)
6. [可维护性需求](#6-可维护性需求)
7. [可扩展性需求](#7-可扩展性需求)

---

## 1. 性能需求

### 1.1 响应时间要求

| 需求ID | 操作类型 | 响应时间要求 | 测试条件 | 优先级 |
|--------|----------|--------------|----------|--------|
| NFR-P-001 | 应用启动 | ≤3秒 | 冷启动到主界面可交互 | P0 |
| NFR-P-002 | 文档打开 | ≤2秒 | 50页以内文档 | P0 |
| NFR-P-003 | 文档打开 | ≤5秒 | 100页以内文档 | P1 |
| NFR-P-004 | 文档保存 | ≤1秒 | 50页以内文档 | P0 |
| NFR-P-005 | 公网AI响应 | ≤10秒 | 首次响应（流式） | P0 |
| NFR-P-006 | 本地AI响应 | ≤30秒 | 首次响应，7B模型 | P0 |
| NFR-P-007 | PDF导出 | ≤5秒 | 50页文档 | P0 |
| NFR-P-008 | DOCX导出 | ≤3秒 | 50页文档 | P0 |
| NFR-P-009 | 全文搜索 | ≤500ms | 1000文档内 | P0 |
| NFR-P-010 | 界面切换 | ≤200ms | 页面/面板切换 | P0 |

### 1.2 资源占用要求

| 需求ID | 资源类型 | 限制值 | 测试条件 | 优先级 |
|--------|----------|--------|----------|--------|
| NFR-P-011 | 内存占用 | ≤500MB | 常规使用 | P0 |
| NFR-P-012 | 内存占用 | ≤1GB | 编辑大文档+AI | P1 |
| NFR-P-013 | CPU占用 | ≤20% | 空闲状态 | P0 |
| NFR-P-014 | CPU占用 | ≤80% | AI生成时 | P1 |
| NFR-P-015 | 磁盘空间 | ≤500MB | 应用安装 | P0 |
| NFR-P-016 | 磁盘IO | ≤50MB/s | 正常操作 | P1 |

### 1.3 并发处理要求

| 需求ID | 场景 | 要求 | 优先级 |
|--------|------|------|--------|
| NFR-P-017 | 同时打开文档 | 支持≥10个文档标签页 | P0 |
| NFR-P-018 | 后台任务 | 自动保存不阻塞用户操作 | P0 |
| NFR-P-019 | AI请求 | 支持取消进行中的AI请求 | P0 |

### 1.4 性能测试指标

```
性能测试场景：
├── 启动性能
│   ├── 冷启动时间 ≤3秒
│   └── 热启动时间 ≤1秒
├── 编辑性能
│   ├── 输入延迟 ≤50ms
│   └── 滚动帧率 ≥30fps
├── 搜索性能
│   ├── 本地搜索 ≤500ms (1000文档)
│   └── 全文搜索 ≤1s (1000文档)
└── 导出性能
    ├── PDF导出 ≤5秒 (50页)
    └── DOCX导出 ≤3秒 (50页)
```

---

## 2. 安全需求

### 2.1 数据传输安全

| 需求ID | 安全项 | 要求 | 优先级 |
|--------|--------|------|--------|
| NFR-S-001 | 公网通信加密 | 必须使用TLS 1.2或更高版本 | P0 |
| NFR-S-002 | 证书验证 | 验证服务器证书有效性 | P0 |
| NFR-S-003 | API请求 | 使用HTTPS协议 | P0 |
| NFR-S-004 | 私域隔离 | 私域环境禁止发起公网请求 | P0 |

### 2.2 数据存储安全

| 需求ID | 安全项 | 要求 | 优先级 |
|--------|--------|------|--------|
| NFR-S-005 | API密钥存储 | 使用AES-256加密存储 | P0 |
| NFR-S-006 | 文档加密 | 支持可选的本地文档加密 | P1 |
| NFR-S-007 | 数据库加密 | SQLite数据库支持加密扩展 | P2 |
| NFR-S-008 | 临时文件 | 敏感临时文件使用后立即删除 | P0 |

### 2.3 敏感信息保护

| 需求ID | 安全项 | 要求 | 优先级 |
|--------|--------|------|--------|
| NFR-S-009 | 敏感词检测 | 公网环境自动检测敏感信息 | P0 |
| NFR-S-010 | 检测范围 | 身份证、手机号、银行卡、涉密关键词 | P0 |
| NFR-S-011 | 检测时机 | 内容发送到AI前进行检测 | P0 |
| NFR-S-012 | 检测响应 | 检测到敏感信息时警告并阻止发送 | P0 |

### 2.4 操作审计

| 需求ID | 安全项 | 要求 | 优先级 |
|--------|--------|------|--------|
| NFR-S-013 | 操作日志 | 记录关键操作日志 | P0 |
| NFR-S-014 | 日志内容 | 操作类型、时间、环境、结果 | P0 |
| NFR-S-015 | 日志保留 | 默认保留90天 | P1 |
| NFR-S-016 | 日志存储 | 本地加密存储 | P1 |

### 2.5 关键操作日志记录

| 操作类型 | 记录内容 |
|----------|----------|
| 环境切换 | 切换时间、源环境、目标环境 |
| AI调用 | 调用时间、环境、AI提供商、Token用量 |
| 文档导出 | 导出时间、文档ID、导出格式 |
| 配置修改 | 修改时间、配置项、修改前后值 |

### 2.6 安全合规

| 需求ID | 合规项 | 要求 | 优先级 |
|--------|--------|------|--------|
| NFR-S-017 | 数据本地化 | 私域环境数据不离开本地 | P0 |
| NFR-S-018 | 用户知情 | 明确告知用户数据流向 | P0 |
| NFR-S-019 | 最小权限 | 应用仅请求必要的系统权限 | P0 |

---

## 3. 可用性需求

### 3.1 易学性

| 需求ID | 要求项 | 指标 | 优先级 |
|--------|--------|------|--------|
| NFR-U-001 | 新手上手 | 30分钟内完成第一篇公文 | P0 |
| NFR-U-002 | 核心功能 | 无需培训即可使用 | P0 |
| NFR-U-003 | 帮助文档 | 提供完整的用户手册 | P1 |
| NFR-U-004 | 引导教程 | 首次使用提供引导 | P1 |

### 3.2 易用性

| 需求ID | 要求项 | 指标 | 优先级 |
|--------|--------|------|--------|
| NFR-U-005 | 操作步骤 | 核心功能≤3步完成 | P0 |
| NFR-U-006 | 界面简洁 | 信息层级清晰，避免认知负担 | P0 |
| NFR-U-007 | 一致性 | 交互方式和视觉风格一致 | P0 |
| NFR-U-008 | 反馈及时 | 操作后立即给予视觉反馈 | P0 |

### 3.3 环境感知（核心要求）

| 需求ID | 要求项 | 指标 | 优先级 |
|--------|--------|------|--------|
| NFR-U-009 | 环境标识 | 任何界面都能识别当前环境 | P0 |
| NFR-U-010 | 颜色区分 | 公网蓝色、私域绿色，对比度明显 | P0 |
| NFR-U-011 | 文字提示 | 始终显示当前环境文字说明 | P0 |
| NFR-U-012 | 切换提醒 | 环境切换时明确提醒用户 | P0 |

### 3.4 容错性

| 需求ID | 要求项 | 指标 | 优先级 |
|--------|--------|------|--------|
| NFR-U-013 | 撤销功能 | 支持多步撤销（≥20步） | P0 |
| NFR-U-014 | 自动保存 | 编辑时自动保存，间隔≤30秒 | P0 |
| NFR-U-015 | 误操作防护 | 危险操作需二次确认 | P0 |
| NFR-U-016 | 数据恢复 | 异常退出后可恢复编辑内容 | P0 |

### 3.5 无障碍支持

| 需求ID | 要求项 | 指标 | 优先级 |
|--------|--------|------|--------|
| NFR-U-017 | 键盘操作 | 核心功能支持纯键盘操作 | P1 |
| NFR-U-018 | 快捷键 | 提供常用操作快捷键 | P0 |
| NFR-U-019 | 字体缩放 | 支持界面字体大小调整 | P2 |

---

## 4. 可靠性需求

### 4.1 稳定性

| 需求ID | 要求项 | 指标 | 优先级 |
|--------|--------|------|--------|
| NFR-R-001 | 无故障运行 | 连续运行8小时无崩溃 | P0 |
| NFR-R-002 | 崩溃率 | ≤0.1%（每1000次操作） | P0 |
| NFR-R-003 | 内存泄漏 | 长时间运行内存增长≤10% | P0 |

### 4.2 数据完整性

| 需求ID | 要求项 | 指标 | 优先级 |
|--------|--------|------|--------|
| NFR-R-004 | 保存完整 | 保存操作不丢失任何内容 | P0 |
| NFR-R-005 | 事务支持 | 数据库操作支持事务回滚 | P0 |
| NFR-R-006 | 版本记录 | 文档修改历史完整保留 | P1 |

### 4.3 故障恢复

| 需求ID | 要求项 | 指标 | 优先级 |
|--------|--------|------|--------|
| NFR-R-007 | 崩溃恢复 | 异常退出后可恢复未保存内容 | P0 |
| NFR-R-008 | 数据库恢复 | 支持数据库备份和恢复 | P1 |
| NFR-R-009 | 配置备份 | 支持用户配置导出/导入 | P2 |

### 4.4 错误处理

| 需求ID | 要求项 | 指标 | 优先级 |
|--------|--------|------|--------|
| NFR-R-010 | 错误提示 | 用户友好的错误信息 | P0 |
| NFR-R-011 | 错误日志 | 记录详细错误信息便于排查 | P0 |
| NFR-R-012 | 降级处理 | AI服务不可用时提供离线功能 | P1 |

---

## 5. 兼容性需求

### 5.1 操作系统兼容

| 需求ID | 操作系统 | 版本要求 | 优先级 |
|--------|----------|----------|--------|
| NFR-C-001 | Windows | Windows 10 1903+, Windows 11 | P0 |
| NFR-C-002 | macOS | macOS 12 (Monterey)+ | P0 |
| NFR-C-003 | Linux | Ubuntu 20.04+, Debian 11+ | P1 |

### 5.2 硬件要求

| 需求ID | 配置项 | 最低要求 | 推荐配置 | 优先级 |
|--------|--------|----------|----------|--------|
| NFR-C-004 | CPU | 双核2.0GHz | 四核3.0GHz+ | P0 |
| NFR-C-005 | 内存 | 4GB | 8GB+ | P0 |
| NFR-C-006 | 硬盘 | 1GB可用空间 | SSD 5GB+ | P0 |
| NFR-C-007 | 显示器 | 1366×768 | 1920×1080+ | P0 |

### 5.3 本地AI运行要求

| 需求ID | 配置项 | 最低要求 | 推荐配置 | 优先级 |
|--------|--------|----------|----------|--------|
| NFR-C-008 | 内存 | 8GB | 16GB+ | P0 |
| NFR-C-009 | GPU | 可选 | NVIDIA 6GB+ | P1 |
| NFR-C-010 | 硬盘 | 10GB（模型存储） | SSD 50GB+ | P0 |

### 5.4 文档格式兼容

| 需求ID | 格式 | 兼容要求 | 优先级 |
|--------|------|----------|--------|
| NFR-C-011 | DOCX | 兼容Microsoft Word 2016+ | P0 |
| NFR-C-012 | PDF | PDF 1.7标准 | P0 |
| NFR-C-013 | OFD | OFD 1.0标准 | P2 |

### 5.5 网络要求

| 需求ID | 场景 | 要求 | 优先级 |
|--------|------|------|--------|
| NFR-C-014 | 公网AI | 稳定的互联网连接 | P0 |
| NFR-C-015 | 私域AI | 可完全离线运行 | P0 |
| NFR-C-016 | 带宽 | 公网AI建议≥1Mbps | P1 |

---

## 6. 可维护性需求

### 6.1 代码质量

| 需求ID | 要求项 | 指标 | 优先级 |
|--------|--------|------|--------|
| NFR-M-001 | 代码规范 | 遵循ESLint/Prettier规范 | P0 |
| NFR-M-002 | 类型安全 | TypeScript strict模式 | P0 |
| NFR-M-003 | 注释覆盖 | 公共API 100%注释 | P1 |
| NFR-M-004 | 单元测试 | 核心模块测试覆盖率≥80% | P1 |

### 6.2 日志与监控

| 需求ID | 要求项 | 指标 | 优先级 |
|--------|--------|------|--------|
| NFR-M-005 | 日志级别 | debug/info/warn/error分级 | P0 |
| NFR-M-006 | 日志内容 | 时间戳、模块、消息、上下文 | P0 |
| NFR-M-007 | 性能指标 | 记录关键操作耗时 | P1 |

### 6.3 配置管理

| 需求ID | 要求项 | 指标 | 优先级 |
|--------|--------|------|--------|
| NFR-M-008 | 配置分离 | 配置与代码分离 | P0 |
| NFR-M-009 | 环境配置 | 支持开发/测试/生产环境 | P0 |
| NFR-M-010 | 热更新 | 部分配置支持不重启生效 | P2 |

### 6.4 升级支持

| 需求ID | 要求项 | 指标 | 优先级 |
|--------|--------|------|--------|
| NFR-M-011 | 自动更新 | 支持应用自动更新检测 | P1 |
| NFR-M-012 | 数据迁移 | 版本升级保留用户数据 | P0 |
| NFR-M-013 | 回滚支持 | 支持回退到上一版本 | P2 |

---

## 7. 可扩展性需求

### 7.1 架构扩展

| 需求ID | 要求项 | 指标 | 优先级 |
|--------|--------|------|--------|
| NFR-E-001 | 模块化 | 功能模块松耦合 | P0 |
| NFR-E-002 | 插件机制 | 预留插件扩展接口 | P2 |
| NFR-E-003 | AI适配器 | 支持添加新的AI提供商 | P0 |

### 7.2 AI服务扩展

| 需求ID | 要求项 | 指标 | 优先级 |
|--------|--------|------|--------|
| NFR-E-004 | 适配器模式 | 统一AI接口抽象 | P0 |
| NFR-E-005 | 自定义接入 | 支持用户配置自定义AI API | P1 |
| NFR-E-006 | 多模型支持 | 同一提供商支持多个模型 | P1 |

### 7.3 存储扩展

| 需求ID | 要求项 | 指标 | 优先级 |
|--------|--------|------|--------|
| NFR-E-007 | 数据库扩展 | Repository模式封装数据访问 | P0 |
| NFR-E-008 | 云同步预留 | 预留云端同步接口 | P2 |

### 7.4 国际化支持

| 需求ID | 要求项 | 指标 | 优先级 |
|--------|--------|------|--------|
| NFR-E-009 | 多语言框架 | 使用i18n框架 | P1 |
| NFR-E-010 | 文本外置 | UI文本与代码分离 | P1 |
| NFR-E-011 | 初始语言 | 支持简体中文、英文 | P1 |

---

## 附录：需求追溯矩阵

| 需求类别 | 需求数量 | P0数量 | P1数量 | P2数量 |
|----------|----------|--------|--------|--------|
| 性能需求 | 19 | 12 | 6 | 1 |
| 安全需求 | 19 | 14 | 4 | 1 |
| 可用性需求 | 19 | 14 | 4 | 1 |
| 可靠性需求 | 12 | 9 | 3 | 0 |
| 兼容性需求 | 16 | 12 | 3 | 1 |
| 可维护性需求 | 13 | 7 | 4 | 2 |
| 可扩展性需求 | 11 | 4 | 5 | 2 |
| **合计** | **109** | **72** | **29** | **8** |

---

*文档结束*
